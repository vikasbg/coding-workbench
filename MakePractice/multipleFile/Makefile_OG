# The makefile consists of targets and the rules for achieving the
# targets. The syntax of declaring the targets and rules

# <target-name>: <dependencies>
#     <rules for creating the target>

# which compiler
CC = gcc

# Compiler flags
CFLAGS = -c -g -O2

# include files
INCLUDE = -I.

# where to install
INSTALL_PATH =

# name of the application
TAR_NAME = program

# path of the source files
SRC_DIR =

# path to current directory
CUR_DIR = .

# target=program (creating the application)
program: main.o pr.o add.o
	$(CC) ${SRC_DIR}/main.o ${SRC_DIR}/add.o ${SRC_DIR}/pr.o -o ${TAR_NAME}
	@echo "Application created successfully"

# target = main.o (Generate relocatable from main.c)
main.o: main.c
        $(CC) $(INCLUDE) $(CFLAGS) $(SRC_DIR)/main.c
        @echo "Relocatable main.o generated"

# target = pr.o (Generate relocatable from pr.c)
pr.o: pr.c
        $(CC) $(INCLUDE) $(CFLAGS) $(SRC_DIR)/pr.c
        @echo "Relocatable pr.o generated"

# target = add.o (Generate relocatable from add.c)
add.o: add.c
        $(CC) $(INCLUDE) $(CFLAGS) $(SRC_DIR)/add.c
        @echo "Relocatable add.o generated"

# target = install app binary
install: $(TAR_NAME)
        cp -f $(CUR_DIR)/$(TAR_NAME) $(INSTALL_PATH)/$(TAR_NAME)
        @echo "Application Installed Successfully at $(INSTALL_PATH)"

# target = clean
clean:
        rm -f $(CUR_DIR)/*.o $(CUR_DIR)/$(TAR_NAME) $(INSTALL_PATH)/$(TAR_NAME)
        @echo "Application Removed Successfully"
